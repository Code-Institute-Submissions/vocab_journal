{% extends 'base.html'%} {% block title %}Dashboard{% endblock %} {% block content %}

<div class="row">

    <div>
        {% with messages = get_flashed_messages() %} {% if messages %} {% for message in messages %}
        <p class="red-text text-darken-2">{{ message }}</p>
        {% endfor %} {% endif %} {% endwith %}
    </div>
</div>
<h3>Users</h3>
<div class="row">
    {% for user in users %}
    <p>{{ user.name.title() }}</p>
    {% endfor %}
</div>

<h3>vocabs</h3>

<form action="{{ url_for('get_filtered', user_id=current_user._id) }}" method="POST">
    <div class="switch">
        <label>
          Show all vocabs
          {% if user_vocabs_only %}
              <input type="checkbox" name="vocab_only" checked>
          {% else %}
              <input type="checkbox" name="vocab_only" >
          {% endif %}
          <span class="lever"></span>
          Only show user vocabs
        </label>
    </div>
    <div class="row right-align">
        <button class="btn waves-effect waves-light right-align" type="submit">Apply filter
            <i class="material-icons right">send</i>
        </button>
    </div>
</form>





<div class="row">
    <ul class="collapsible" data-collapsible="Expandable">
        {% for vocab in vocabs %}

        <li>
            <div class="collapsible-header">
                <div class="vocab">"{{ vocab.vocab }}"</div>
                <div class="user_id"> by {{ vocab.user }} </div>
                <div><i class="tiny material-icons">favorite</i>{{ vocab.likes }}</div>
                <div><i class="tiny material-icons">youtube_searched_for</i>{{ vocab.lookup_count }}</div>
            </div>
            <div class="collapsible-body">
                <span>definition: {{ vocab.user_definition }}</span>
                <p>likes: {{ vocab.likes }}<br> lookup count: {{ vocab.lookup_count }}<br> published date: {{ vocab.pub_date }}</p>
                <div class="right-align">
                    {% if current_user.username == vocab.user or current_user.admin %}
                    <a href="#" class="waves-effect waves-light btn btn_small deep-orange">Edit</a>
                    <a href="{{ url_for('delete_vocab', vocab_id=vocab._id) }}" class="waves-effect waves-light btn btn_small deep-orange">delete</a> {% endif %}
                    <a href="{{ url_for('view_vocab', vocab_id=vocab._id) }}" class="waves-effect waves-light btn btn_small deep-orange">view</a> 
                </div>
            </div>
        </li>

        {% endfor %}
    </ul>

</div>


<!--<div class="row">-->
<!--    <a href="{{ url_for('logout') }}" class="waves-effect waves-light btn-large"><i class="material-icons left">group_add</i>Log out</a>-->
<!--</div>-->
{% endblock %}
